define("bundles/ondemand/components/PremiumGradingModal",["require","exports","module","react-with-addons","pages/open-course/common/constants","js/lib/path","js/components/Imgix","bundles/payments/promises/productPrices","js/app/retracked","bundles/payments/components/RedirectToCheckout","bundles/phoenix/components/Modal","pages/open-course/common/models/itemMetadata","i18n!nls/ondemand","css!./__styles__/PremiumGradingModal"],function(require,exports,module){"use strict";function _defaults(e,r){for(var a=Object.getOwnPropertyNames(r),t=0;t<a.length;t++){var n=a[t],o=Object.getOwnPropertyDescriptor(r,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var o=function(){function defineProperties(o,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=function get(a,c,l){var n=!0;e:for(;n;){var t=a,i=c,s=l;n=!1,null===t&&(t=Function.prototype);var e=Object.getOwnPropertyDescriptor(t,i);if(void 0===e){var o=Object.getPrototypeOf(t);if(null===o)return void 0;a=o,c=i,l=s,n=!0,e=o=void 0;continue e}if("value"in e)return e.value;var r=e.get;if(void 0===r)return void 0;return r.call(s)}},e=require("react-with-addons"),a=require("pages/open-course/common/constants").assets.rootPath,i=require("js/lib/path"),n=require("js/components/Imgix"),s=require("bundles/payments/promises/productPrices"),c=require("js/app/retracked"),l=require("bundles/payments/components/RedirectToCheckout"),u=require("bundles/phoenix/components/Modal"),d=require("pages/open-course/common/models/itemMetadata"),t=require("i18n!nls/ondemand"),p=i.join(a,"bundles/certificate/assets/images/cert_stamp.png");require("css!./__styles__/PremiumGradingModal");var m=function(a){function PremiumGradingModal(){var e=this;_classCallCheck(this,PremiumGradingModal),r(Object.getPrototypeOf(PremiumGradingModal.prototype),"constructor",this).apply(this,arguments),this.state={priceAndCurrency:"",redirectToCheckout:!1},this.handleCloseModal=function(){e.track("click.close"),e.props.onClose()},this.onUpgrade=function(){e.track("click.upgrade"),e.setState({redirectToCheckout:!0})}}return _inherits(PremiumGradingModal,a),o(PremiumGradingModal,[{key:"componentWillMount",value:function componentWillMount(){var e=this;this.courseId=this.props.itemMetadata.get("course.id"),this.track=c.makeTracker({namespace:"monetization.premium_grading_preview_modal",include:{course_id:function course_id(){return e.courseId},module_id:function module_id(){return e.props.itemMetadata.get("lesson.module.id")},lesson_id:function lesson_id(){return e.props.itemMetadata.get("lesson.id")},item_id:function item_id(){return e.props.itemMetadata.get("id")}}}),s.getPriceForVC({courseId:this.courseId}).then(function(e){this.setState({priceAndCurrency:e.formattedFinalAmount.formattedString})}.bind(this)).fail(function(e){if(this.track("error.product_price",e),!e.responseJSON)throw e}.bind(this)).done()}},{key:"componentDidMount",value:function componentDidMount(){this.track("render")}},{key:"render",value:function render(){return e.createElement("div",{className:"rc-PremiumGradingModal"},e.createElement(u,{handleClose:this.handleCloseModal,modalName:"Preview Assignment"},e.createElement("div",{className:"styleguide container"},e.createElement("div",{className:"horizontal-box"},e.createElement("div",{className:"flex-3"},e.createElement(n,{src:p,alt:"Certificate stamp",width:100})),e.createElement("div",{className:"flex-9"},e.createElement("h3",{className:"title"},t("Preview Assignment?")),e.createElement("p",{className:"body-1-text"},t("This assignment is part of the Certificate option. You can preview as an auditor,\n                    but you'll need to upgrade to submit and receive feedback. Your upgrade includes full\n                    assignment access and the opportunity to earn a shareable Certificate.")))),e.createElement("hr",null),e.createElement("div",{className:"horizontal-box align-items-absolute-center"},e.createElement("button",{className:"passive align-horizontal-center",onClick:this.handleCloseModal},t("Close")),e.createElement("button",{className:"primary align-horizontal-center",onClick:this.onUpgrade},t("Upgrade Course"),e.createElement("span",null,"Â ",this.state.priceAndCurrency))),this.state.redirectToCheckout&&e.createElement(l,{courseId:this.courseId,showModal:!1}))))}}],[{key:"propTypes",value:{itemMetadata:e.PropTypes.instanceOf(d).isRequired,onClose:e.PropTypes.func.isRequired},enumerable:!0}]),PremiumGradingModal}(e.Component);module.exports=m});